<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Facelet Title</title>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dancing+Script|Roboto"/>

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
              integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
              crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
                integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
        crossorigin=""></script>

        <h:outputStylesheet library="css" name="profile.css" />
    </h:head>
    <h:body>

        <div class="row">
            <div class="col m3 ">
                <ui:include src="./sidebar.xhtml"/>
            </div>

            <div class="col m9">

                <div id="editlocations" class="row section scrollspy"></div>

                <h4>User Allergies</h4>
                <ul>
                    <ui:repeat value="#{profile.user_Allergies}" var="value">
                        <li>#{value.get_type()}</li>
                        <h:form>
                            <h:commandButton value="Remove" action="#{profile.remove_allergies(value)}"/>
                        </h:form>

                    </ui:repeat>
                </ul>
                <h:form styleClass="center-align">
                    <div class="row">

                        <div class="input-field col s12">
                            <h:selectOneMenu id="polen"  value="#{profile.allergy}">
                                <f:selectItem itemValue="1" itemLabel="Plátano" />
                                <f:selectItem itemValue="2" itemLabel="Gramíneas" />
                                <f:selectItem itemValue="3" itemLabel="Oliveira" />
                                <f:selectItem itemValue="4" itemLabel="Azinheira" />
                            </h:selectOneMenu>

                            <label>Polen Type</label>
                        </div>

                    </div>
                    <div class="row">
                        <h:commandButton value="Add allergy" action="#{profile.add_allergies}" styleClass="waves-effect waves-light btn-large text-white"/>
                    </div>

                </h:form>


                <h4>User Locations</h4>
                <ul>
                    <ui:repeat value="#{profile.user_Locations}" var="value">
                        <ul>
                            <li> #{value.get_lat()} </li>
                            <li> #{value.get_long()} </li>
                            <li> #{value.get_type()} </li>
                        </ul>
                        <h:form>
                            <h:commandButton value="Remove" action="#{profile.remove_location(value.get_id())}"/>
                        </h:form>
                        <h:form>
                            <h:inputText id="flong" value="#{profile.up_lng}"
                                         required="true" requiredMessage="Please enter longitude"/>
                            <h:inputText id="flat" value="#{profile.up_lat}"
                                         required="true" requiredMessage="Please enter latitude"/>

                            <h:selectOneRadio value="#{profile.up_polen_type}">
                                <f:selectItem itemValue="1" itemLabel="Plátanos" />
                                <f:selectItem itemValue="2" itemLabel="Gramíneas" />
                                <f:selectItem itemValue="3" itemLabel="Oliveira" />
                                <f:selectItem itemValue="4" itemLabel="Azinheira" />
                            </h:selectOneRadio>
                            <h:commandButton value="Edit" action="#{profile.update_location(value.get_id())}"/>
                        </h:form>
                    </ui:repeat>
                </ul>

                <h4>Get walk riks</h4>
                <h:form>
                    <h:inputText id="wlong" value="#{profile.risk_lng}"
                                 required="true" requiredMessage="Please enter longitude"/>
                    <h:inputText id="wlat" value="#{profile.risk_lat}"
                                 required="true" requiredMessage="Please enter latitude"/>
                    <h:commandButton value="Get Risk" action="#{profile.get_risk}"/>
                </h:form>

                <ul>
                    <ui:repeat value="#{profile.risk_Locations}" var="value">
                        <ul>
                            <li> #{value.get_lat()} </li>
                            <li> #{value.get_long()} </li>
                            <li> #{value.get_type()} </li>
                        </ul>
                    </ui:repeat>
                </ul>
            </div>
        </div>


        <script src="./resources/js/mapprofile.js"></script>
        <script src="./resources/js/profilenav.js"></script>
    </h:body>
</html>

